<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SSIDMail - Temporary Email</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>

:root{
  --bg:#f4f6fb;
  --card:#ffffff;
  --text:#111827;
  --accent:#6366f1;
}

body.dark{
  --bg:#0f172a;
  --card:#1e293b;
  --text:#f1f5f9;
  --accent:#818cf8;
}

body{
  margin:0;
  font-family:'Poppins',sans-serif;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  transition:0.3s;
}

.card{
  background:var(--card);
  padding:40px;
  border-radius:20px;
  width:420px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,0.1);
}

input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:1px solid #ddd;
  margin-bottom:10px;
  font-size:14px;
}

.domain{
  font-size:13px;
  opacity:0.7;
  margin-bottom:15px;
}

.email-box{
  background:rgba(0,0,0,0.05);
  padding:15px;
  border-radius:10px;
  font-size:15px;
  word-break:break-all;
  margin-bottom:20px;
}

.buttons{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
}

.generate{ background:var(--accent); color:white; }
.copy{ background:#10b981; color:white; }
.inbox{ background:#3b82f6; color:white; }
.refresh{ background:#f59e0b; color:white; }
.toggle{ margin-top:15px; background:#111; color:white; }

@media(max-width:500px){
  .card{ width:90%; padding:25px; }
}

</style>
</head>

<body>

<div class="card">
  <h2>ðŸ“¬ SSIDMail</h2>
  <div style="font-size:13px;opacity:0.7;margin-bottom:20px;">
    Create Temporary Email
  </div>

  <!-- Username Input -->
  <input id="username" placeholder="Enter username">
  <div class="domain">@ssidmail.my.id</div>

  <!-- Result -->
  <div class="email-box" id="email">Not generated</div>

  <div class="buttons">
    <button class="generate" onclick="createEmail()">Create</button>
    <button class="copy" onclick="copyEmail()">Copy</button>
  </div>

  <div class="buttons" style="margin-top:10px;">
    <button class="inbox" onclick="openInbox()">Open Inbox</button>
    <button class="refresh" onclick="refreshInbox()">Refresh Inbox</button>
  </div>

  <button class="toggle" onclick="toggleMode()">ðŸŒ™ Toggle Mode</button>
</div>

<script>

function createEmail(){
  const user = document.getElementById("username").value.trim();

  if(!user){
    alert("Enter username first!");
    return;
  }

  const email = user + "@ssidmail.my.id";
  document.getElementById("email").innerText = email;

  localStorage.setItem("tempEmail", email);
}

function copyEmail(){
  const email = document.getElementById("email").innerText;
  if(email === "Not generated") return;
  navigator.clipboard.writeText(email);
  alert("Copied!");
}

function openInbox(){
  const email = localStorage.getItem("tempEmail");
  if(!email){
    alert("Create email first!");
    return;
  }

  window.open(
    "https://email-handler.saisoku-id2020.workers.dev/inbox?email=" + email,
    "_blank"
  );
}

function refreshInbox(){
  const email = localStorage.getItem("tempEmail");
  if(!email){
    alert("Create email first!");
    return;
  }

  window.open(
    "https://email-handler.saisoku-id2020.workers.dev/inbox?email=" + email,
    "_blank"
  );
}

function toggleMode(){
  document.body.classList.toggle("dark");
  localStorage.setItem("theme",
    document.body.classList.contains("dark") ? "dark" : "light"
  );
}

/* Restore saved email */
const saved = localStorage.getItem("tempEmail");
if(saved){
  document.getElementById("email").innerText = saved;
  document.getElementById("username").value = saved.split("@")[0];
}

/* Restore theme */
if(localStorage.getItem("theme")==="dark"){
  document.body.classList.add("dark");
}

</script>

</body>
</html>
